import{ulid}from"ulid";export default class NoticeManager{manager;notice_map=new Map;constructor(e){this.manager=e}set(t,n,r,i=!1){for(let e of this.manager.philia.clients)e.request(`newNotice`).catch(()=>{});return this.notice_map.set(ulid(),{name:t,desc:n,input:i,handle:r})}count(){return this.notice_map.size}list(){let e=[];for(let[t,{name:n,desc:r,input:i}]of this.notice_map)e.push({id:t,name:n,desc:r,input:i});return e}handle({id:e,data:t},n){let r=this.notice_map.get(e);if(!r)throw Error(`通知不存在: ${e}`);return this.notice_map.delete(e),r.handle?.(t,n)}}