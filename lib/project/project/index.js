import fs from"node:fs/promises";import Path from"node:path";import{getRootDir}from"#util";export const impl={Milky:()=>import(`./impl/Milky.js`),OneBotv11:()=>import(`./impl/OneBotv11.js`)};export const app={};const path=Path.join(getRootDir(),`plugin`);for(let a of await fs.readdir(path,{withFileTypes:!0}).catch(()=>[])){if(!a.isDirectory())continue;for(let o of await fs.readdir(Path.join(path,a.name,`lib`),{withFileTypes:!0}).catch(()=>[])){if(!o.isFile())continue;o.name===`impl.js`&&(impl[a.name]=()=>import(`#root/plugin/${a.name}/lib/impl.js`)),o.name===`app.js`&&(app[a.name]=()=>import(`#root/plugin/${a.name}/lib/app.js`))}}