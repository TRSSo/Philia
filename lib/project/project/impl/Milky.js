import*as inquirer from"@inquirer/prompts";import{Impl}from"#protocol/milky";import*as Common from"../common.js";import*as Philia from"../philia.js";export class Project extends Common.Project{impl;constructor(e){super(e),this.impl=new Impl(this.logger,this.config.philia,this.config.server)}static async createConfig(r){let i=await inquirer.input({message:`请输入 Milky 服务器地址:`,default:`http://localhost:2536`,required:!0,validate(e){try{new URL(e)}catch{return`请输入正确的URL`}return!0}});return{name:r,server:i,philia:await Philia.Project.createConfig(`App`)}}verifyConfig(){try{this.config.server=new URL(this.config.server)}catch(e){throw TypeError(`Milky 服务器地址格式错误`,{cause:e})}}start(){return this.impl.start()}stop(){return this.impl.close()}}